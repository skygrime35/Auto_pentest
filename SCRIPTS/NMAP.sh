#!/bin/bash

. ENV/general.env

FULL_PATH_DATA="${PWD}/${DATA_FOLDER}/$(basename $0)/"
mkdir -p "$FULL_PATH_DATA"

echo "$FULL_PATH_DATA"

run_nmap_scan() {
    scan_type=$1
    output_file=$2
    shift 2
    echo "======== NMAP - $scan_type ========"
    nmap "$@" -o "$FULL_PATH_DATA/$output_file"
}

run_nmap_scan "Simple scan" "nmap_simple_scan.txt" $IP
run_nmap_scan "Full scan" "nmap_full_scan.txt" $IP -sV -sC -Pn -v -p-
run_nmap_scan "Fast UDP scan" "nmap_UDP_fast_scan.txt" $IP -sU --min-rate 5000

#run_nmap_scan "Simple scan to xml" "scan_nmap.xml" $IP -A -oX #-T4 # Fonctionne pas bien :(
