#!/bin/bash

# Check if lftp is installed
if ! command -v lftp &> /dev/null
then
    echo "lftp is not installed."
    read -p "Do you want to install lftp? (Y/n) " response
    if [[ $response =~ ^[Yy](es)?$ ]]
    then
        # Adapt the following command according to the operating system
        sudo apt-get install lftp
    else
        echo "lftp is required to run this script."
        exit 1
    fi
fi

# Load environment variables
. ENV/vic.env

# Create a local folder for downloaded files
mkdir -p DATA/$(basename $0)/

# Use lftp to connect and download all files from the FTP server
lftp -e "mirror --verbose / DATA/$(basename $0)/; quit" -u anonymous, $IP
